<template>
  <div class="g-layout--wrapper">
    <div class="g-container">
      <TheNav :links="isAdm ? links_adm : links_grads" :username="getName" />

      <div class="g-container--inner">
        <Nuxt />
      </div>
    </div>
    <TheFooter />
  </div>
</template>

<script>
import Vue from "vue";
import Toast from "vue-toastification";
import global from "../mixin/global";
import TheNav from "../components/Nav/TheNav";
import TheFooter from "../components/Footer/TheFooter";
import { mapGetters } from "vuex";
import { isUserAdm } from "../helpers/service";
Vue.mixin(global);

Vue.use(Toast, {
  position: "top-right",
  newestOnTop: true,
  maxToasts: 3,
  pauseOnHover: true,
});
export default {
  components: { TheNav, TheFooter },
  middleware: "courses",

  data() {
    return {
      displayADMLinks: this.isAdm,
      THEname: "",
      displayADMLinks: this.isAdm,
    };
  },

  computed: {
    ...mapGetters("auth", ["getToken", "getName"]),
    availableLocales() {
      return this.$i18n.locales.filter((i) => i.code !== this.$i18n.locale);
    },

    isAdm() {
      return isUserAdm(this.getToken);
    },

    links_grads() {
      return [
        {
          path: "dashboard",
          name: this.$t("PATH_NAME_HOME"),
        },
        {
          path: "learningpath",
          name: this.$t("PATH_NAME_COURSES"),
        },
        {
          path: "scores",
          name: this.$t("PATH_NAME_SCORE"),
        },
      ];
    },
    links_adm() {
      return [
        {
          path: "/adm/dashboard",
          name: this.$t("PATH_NAME_HOME"),
        },
        {
          path: "/adm/registeremployee",
          name: this.$t("PATH_NAME_NEW_EMPLOYEE"),
        },
        {
          path: "/adm/updatepath",
          name: this.$t("PATH_NAME_NEW_COURSE"),
        },
      ];
    },
  },
};
</script>
<style >
@import "../assets/styles/styles.css";
@import "../assets/styles/tables.css";
@import "../assets/styles/colors.css";
@import "../assets/styles/typography.css";
@import "../assets/styles/forms.css";
@import "../assets/styles/dashboard.css";
</style>
